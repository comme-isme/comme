create empty-> 이름 game manager -> script 추가(game manager)
스테이지도 비슷하게 한다.(1~2~3~스테이지)



using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class GameManager:MonoBehaviour{
  //점수와 스테이지 관리
  public int totalPoint;
  public int stagePoint;
  public int stageIndex;
  public int health;
  public PlayerMove player;  ->인스펙터창에 끌어다 놓기
  public GameObjectp[] Stages;
  
  public void nextStage(){
  
    //스테이지 변경
    Stages[stageIndex].SetActive(false);
    stageIndex++;
    Stages[stageIndex].SetActive(true);
    
    totalPoint +=stagePoint;
    stagePoint=0;
  }
  
  //얘를 낭떨어지 밑으로 collider 설정
  void OnTriggerEnter2D(Collider2D collision){
    if(collision.gameObject.tag=="Player")
     
      //플레이어 원위치
      if(health>1){
        collision.attachedRigidbody.velocity =Vector2.zero;
        collision.transform.position =new Vector3(0,0,-1);
      }
       HelathDown();
    }
  }
  
  public void HealthDown(){
    if(health>1)
      health--;
    else
      player.OnDie();
    
  
  public void OnDie(){
    spriteRenderer.color=new Color(1,1,1,0.4f);
    spriteRenderer.flipY=true;
    capsuleCollider.enabled=false;
    rigid.AddForce(Vector2.up*5,ForceMode2D.Impulse);
  }
 
 void PlayerReposition(){
  player.transform.position=new Vector3(0,0,-1);
  player.VelocityZero();
 }
}
